<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Interpretador de Nomenclaturas 5G v8</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    /* Paleta de colores profesionales y modernos */
    :root {
      --color-primary: #0056b3; /* Azul oscuro para elementos principales */
      --color-secondary: #007bff; /* Azul m√°s vibrante para enlaces */
      --color-accent: #28a745; /* Verde para acciones de √©xito */
      --color-text-dark: #343a40; /* Texto oscuro para t√≠tulos */
      --color-text-medium: #495057; /* Texto de cuerpo */
      --color-background-light: #f8f9fa; /* Fondo muy claro */
      --color-background-medium: #e9ecef; /* Fondo gris claro para contenedores secundarios */
      --color-border: #ced4da; /* Borde suave */
      --color-white: #ffffff; /* Este color ahora se usar√° menos para fondos grandes */
      --color-shadow: rgba(0, 0, 0, 0.08); /* Sombra sutil */
    }

    body {
      font-family: 'Roboto', sans-serif; /* Tipograf√≠a principal */
      background-color: var(--color-background-light); /* Fondo suave */
      margin: 0;
      padding: 20px;
      line-height: 1.6; /* Mejorar legibilidad */
      color: var(--color-text-medium);
      display: flex;
      justify-content: center; /* Centrar el contenido horizontalmente */
      align-items: flex-start; /* Alinear el contenido al inicio verticalmente */
      min-height: 100vh; /* Ocupar al menos el alto de la ventana */
    }

    .container {
      /* Ahora el contenedor principal tiene el mismo color de fondo que el body */
      background-color: var(--color-background-light); 
      padding: 30px; /* Padding ligeramente reducido */
      border-radius: 10px; /* Bordes m√°s redondeados */
      /* Sombra m√°s pronunciada para diferenciar el contenedor, ya que el fondo es el mismo */
      box-shadow: 0 6px 25px rgba(0, 0, 0, 0.1); 
      max-width: 900px; /* Ancho m√°ximo para el contenido */
      width: 100%; /* Asegurar que ocupe el ancho disponible */
      margin: 20px 0; /* Margen superior e inferior */
    }

    h2 {
      text-align: center;
      font-size: 28px;
      color: var(--color-primary);
      margin-top: 0; /* Lo reseteamos o lo pones en 0 para pegarse a la firma */
      margin-bottom: 25px; /* Mantenemos este para separar del textarea */
      font-weight: 500;
    }
    /* --- */
    /* Nuevo estilo para la l√≠nea de firma debajo del t√≠tulo principal */
    .signature-line {
      display: block;
      text-align: center;
      font-size: 16px;
      color: var(--color-text-medium);
      margin-top: 0; /* Lo reseteamos o lo pones en 0, ya que es el primero ahora */
      margin-bottom: 5px; /* Ajusta este valor para que se acerque al h2 */
      opacity: 0.7;
      font-weight: 600;
    }
    /* --- */

    textarea {
      width: 100%;
      height: 110px; /* Altura ligeramente reducida */
      margin-bottom: 15px; /* Espacio debajo del textarea */
      padding: 10px; /* Padding ligeramente reducido */
      font-size: 16px;
      border: 1px solid var(--color-border);
      border-radius: 6px; /* Bordes redondeados */
      box-sizing: border-box; /* Incluir padding y borde en el ancho */
      resize: vertical; /* Permitir redimensionar verticalmente */
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
      background-color: var(--color-white); /* Mantener blanco para el input */
    }

    textarea:focus {
      border-color: var(--color-secondary);
      box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
      outline: none;
    }
    /* Nuevo estilo para el contenedor del bot√≥n */
    .button-container {
      text-align: center; /* Centra el contenido (el bot√≥n) horizontalmente */
      margin-bottom: 20px; /* Mantiene el espacio inferior del bot√≥n */
    }

    button {
      background-color: var(--color-primary); /* Color principal para el bot√≥n */
      color: var(--color-white);
      border: none;
      padding: 10px 20px; /* Padding ligeramente reducido */
      font-size: 16px;
      font-weight: 500;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Sombra sutil para el bot√≥n */
    }

    button:hover {
      background-color: #004085; /* Tono m√°s oscuro al pasar el mouse */
      transform: translateY(-2px); /* Peque√±o efecto de elevaci√≥n */
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px; /* Espacio sobre la tabla */
      background-color: var(--color-white); /* La tabla sigue siendo blanca para destacar */
      box-shadow: 0 2px 8px var(--color-shadow); /* Sombra para la tabla */
      border-radius: 8px; /* Bordes redondeados para la tabla */
      overflow: hidden; /* Asegura que los bordes redondeados se apliquen al contenido */
    }
    .table-responsive {
      width: 100%;
      overflow-x: auto; /* Permite el desplazamiento horizontal si el contenido es muy ancho */
      -webkit-overflow-scrolling: touch; /* Mejora el scroll en dispositivos iOS */
    }
    
    th, td {
      border: 1px solid var(--color-border); /* Bordes m√°s suaves */
      padding: 10px 12px; /* Padding ligeramente reducido en celdas */
      text-align: left;
      font-size: 14px; /* Tama√±o de fuente ligeramente menor en tabla */
    }

    th {
      background-color: var(--color-background-medium); /* Fondo gris claro para encabezados */
      color: var(--color-text-dark); /* Color de texto para encabezados */
      font-weight: 600; /* M√°s negrita para encabezados */
    }

    tr:nth-child(even) {
      background-color: var(--color-background-light); /* Usar una variable para un gris claro */
    }

    tr:hover {
      background-color: #e6f2ff; /* Resaltado suave al pasar el mouse por la fila */
    }

    .error {
      color: #dc3545; /* Rojo de peligro */
      font-weight: 600;
    }

    a {
      text-decoration: none;
      color: var(--color-secondary); /* Azul para enlaces */
      transition: color 0.2s ease;
    }

    a:hover {
      color: var(--color-primary); /* Tono m√°s oscuro al pasar el mouse */
      text-decoration: underline;
    }

    /* Estilos para la secci√≥n de enlaces adicionales */
    .links-adicionales {
      margin-top: 30px; /* Espacio sobre la secci√≥n de enlaces */
    }

    /* Estilos para los t√≠tulos dentro de links-adicionales */
    .links-adicionales h3 {
      margin-top: 0; /* Mantenemos este en 0 para el primer h3 */
      color: var(--color-text-dark);
      font-size: 17px;
      margin-bottom: 12px;
      padding-bottom: 6px;
      text-align: left;
      padding-top: 15px;
      background-color: var(--color-background-medium);
      padding-left: 15px;
      padding-right: 15px;
      border-top-left-radius: 6px;
      border-top-right-radius: 6px;
      border-bottom: 1px solid var(--color-border);
    }

    /* NUEVA REGLA: A√±adir un margen superior a los h3 que no son el primer hijo */
    .links-adicionales h3 + .info-table {
      margin-top: 5px; /* Peque√±o ajuste para que la tabla no se pegue al t√≠tulo */
    }

    .links-adicionales h3:not(:first-child) {
      margin-top: 25px; /* Ajusta este valor para dar m√°s o menos espacio */
    }

    /* Estilos para las listas de enlaces dentro de links-adicionales */
    .links-adicionales ul {
      list-style: none;
      padding: 0 15px 15px; /* Ajusta el padding de la lista para que coincida con el h3 */
      margin: 0; /* Elimina margen por defecto del ul */
      background-color: var(--color-white); /* Fondo blanco para las listas */
      box-shadow: 0 2px 8px var(--color-shadow); /* Sombra para cada bloque de lista */
      border-bottom-left-radius: 6px; /* Bordes redondeados en la parte inferior */
      border-bottom-right-radius: 6px;
      margin-bottom: 20px; /* Espacio entre bloques de enlaces */
    }

    .links-adicionales li {
      margin-bottom: 8px;
      font-size: 14px;
    }

    .links-adicionales li:last-child {
      margin-bottom: 0;
    }
    /* Estilos para la firma */
    .footer-signature {
      text-align: center;
      margin-top: 40px; /* Mayor espacio para separarla del contenido */
      font-size: 13px; /* Tama√±o de fuente m√°s peque√±o */
      color: var(--color-text-medium); /* Color de texto m√°s suave */
      opacity: 0.7; /* Ligeramente transparente */
    }
    /* Estilos para la tabla informativa */
    .info-table {
      width: 100%; /* Ocupa todo el ancho disponible */
      border-collapse: collapse; /* Bordes unidos */
      margin-top: 15px; /* Espacio superior para separarla del contenido anterior */
      background-color: var(--color-white); /* Fondo blanco */
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05); /* Sombra m√°s sutil */
      border-radius: 6px; /* Bordes redondeados */
      overflow: hidden; /* Asegura que la sombra y borde redondeado se apliquen bien */
      font-size: 13px; /* Fuente un poco m√°s peque√±a que la tabla de resultados */
    }

    .info-table th, .info-table td {
      border: 1px solid var(--color-border); /* Bordes suaves */
      padding: 8px 10px; /* Padding reducido */
      text-align: left;
    }

    .info-table th {
      background-color: var(--color-background-medium); /* Fondo gris claro para encabezados */
      color: var(--color-text-dark); /* Texto oscuro */
      font-weight: 600; /* Negrita */
    }

    .info-table tr:nth-child(even) {
      background-color: #f7f7f7; /* Cebra a√∫n m√°s suave para filas pares */
    }

    .info-table tr:hover {
      background-color: #eef8ff; /* Resaltado suave al pasar el mouse */
    }
  </style>
</head>
<body>
  <div class="container">
    <span class="signature-line">NOC-MO</span> <h2>Interpretador de C√≥digos de Nomenclatura 5G</h2>

    <textarea id="inputCodigos" placeholder="Pegue aqu√≠ los c√≥digos, uno por l√≠nea o separados por coma..."></textarea>
    
    <div class="button-container">
      <button id="btnInterpretar">Interpretar</button>
    </div>

    <div class="table-responsive">
      <table id="tablaResultados">
        <thead>
          <tr>
            <th>C√≥digo</th>
            <th>Pa√≠s</th>
            <th>Provincia</th>
            <th>Sitio</th>
            <th>Data Center</th>
            <th>Equipo</th>
            <th>Tipo</th>
            <th>N√∫mero</th>
            <th>Link Grafana</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="links-adicionales">
      <h3>Enlaces de Inter√©s</h3>
      <ul>
        <li>
          <a href="http://grafana-teco.telecom.com.ar:3000/d/c0239a12-c598-4291-a18b-01fa48bfc030/estado-de-despliegue-core-5gc?orgId=6&viewPanel=1" target="_blank">
            üö¶ CORE 5G Infra (Estado de Despliegue) üö¶
          </a>
        </li>
      </ul>

      <h3>CDC/EDC por Sitio</h3> 
      <table class="info-table">
        <thead>
          <tr>
            <th>Sitio</th>
            <th>EDC/CDC</th>
          </tr>
        </thead>
        <tbody id="tbodySitiosDC">
        </tbody>
      </table>

      <h3>Control Plane 5GC</h3> 
      <table class="info-table"> 
        <thead>
          <tr>
            <th>Nodo</th>
            <th>Ubicaci√≥n Topol√≥gica</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>SMF1BEL - AMF1BEL</td>
            <td>ARCCBEL-DGM003/4 / UNC / HA 5GC / BEL01CDC</td>
          </tr>
          <tr>
            <td>SMF1HOR - AMF1HOR - NCG1HOR</td>
            <td>ARCCHOR-DGM003/4 / UNC / HA 5GC / HOR01DC</td>
          </tr>
          <tr>
            <td>SMF1SLO - AMF1SLO - NCG1SLO</td>
            <td>ARBBSLO-DGM003/4 / UNC / HA 5GC / SLO01DC</td> 
          </tr>
        </tbody>
      </table>
      <h3>User Plane 5GC</h3> 
      <table class="info-table"> 
        <thead>
          <tr>
            <th>Nodo</th>
            <th>Ubicaci√≥n Topol√≥gica</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>UPF1COR</td>
            <td>ARXXCEN-DGM001/2 / UDG / HA 5GC / COR01EDC</td>
          </tr>
          <tr>
            <td>UPF1HOR</td>
            <td>ARCCHOR-DGM001/2 / UDG / HA 5GC / HOR01EDC</td>
          </tr>
          <tr>
            <td>UPF1RES</td>
            <td>ARHHRES-DGM001/2 / UDG / HA 5GC / RES01EDC</td>
          </tr>
          <tr>
            <td>UPF1ROS</td>
            <td>ARSSIRD-DGM001/2 / UDG / HA 5GC / ROS01EDC</td> 
          </tr>
          <tr>
            <td>UPF1SLO</td>
            <td>ARBBSLO-DGM001/2 / UDG / HA 5GC / SLO01EDC</td>
          </tr>
          <tr>
            <td>UPF1TUC</td>
            <td>ARTTMUS-DGM001/2 / UDG / HA 5GC / TUC01EDC</td> 
          </tr>
        </tbody>
      </table>
    </div>
    <div class="footer-signature">
      ¬∑ NOC-MO ¬∑ 2025 ¬∑ ¬†
      ƒë‚ôú
    </div>
  </div>

  <script>
    const paises = { "AR": "Argentina" };
    const provincias = {
      "CC": "Capital Federal", "BB": "Buenos Aires", "HH": "Chaco",
      "XX": "C√≥rdoba", "SS": "Santa Fe", "TT": "Tucum√°n"
    };
    const sitios = {
      "SLO": "San Lorenzo", "HOR": "Hornos", "BEL": "Belgrano",
      "CEN": "C√≥rdoba Centro", "GLF": "Golf", "MUS": "Mu√±ecas",
      "RES": "Resistencia", "IRD": "Rosario", "MUN": "Munro",
    };
    const tipoDC = {
      "C": "CDC", "E": "EDC"
    };
    const equipos = { "E": "EOR (Spine)", "T": "TOR (Leaf)" };
    const tipoEquipo = { "S": "Service", "M": "Management", "D": "Dual" };

    const grafanaLinks = {
      "Belgrano": {
        "CDC": "http://grafana-teco.telecom.com.ar:3000/d/jja8s9Fzp/topologia-cdc-belgrano-5gc?orgId=6&refresh=1m"
      },
      "Hornos": {
        "CDC": "http://grafana-teco.telecom.com.ar:3000/d/jja8s9FIw/topologia-cdc-hornos-5gc?orgId=6&refresh=1m",
        "EDC": "http://grafana-teco.telecom.com.ar:3000/d/2_8Q89KSzw/topologia-hornos-edc-5gc?orgId=6&refresh=1m"
      },
      "San Lorenzo": {
        "CDC": "http://grafana-teco.telecom.com.ar:3000/d/jja8s9Fes/topologia-cdc-san-lorenzo-5gc?orgId=6&refresh=1m",
        "EDC": "http://grafana-teco.telecom.com.ar:3000/d/2_8Q89KSze/topologia-san-lorenzo-edc-5gc?orgId=6&refresh=1m"
      },
      "Golf": {
        "CDC": [
          "http://grafana-teco.telecom.com.ar:3000/d/jja8s9eds/topologia-cdc1-golf-5gc?orgId=6&refresh=1m",
          "http://grafana-teco.telecom.com.ar:3000/d/jja8s9etx/topologia-cdc2-golf-5gc?orgId=6&refresh=1m"
        ],
        "EDC": [
          "http://grafana-teco.telecom.com.ar:3000/d/2_8Q89KSzo/topologia-edc1-golf-5gc?orgId=6&refresh=1m",
          "http://grafana-teco.telecom.com.ar:3000/d/jja8s9etx/topologia-cdc2-golf-5gc?orgId=6&refresh=1m"
        ]
      },
      "C√≥rdoba Centro": {
        "EDC": "http://grafana-teco.telecom.com.ar:3000/d/2_8Q89Ksddf/topologia-cordoba-edc-5gc?orgId=6&refresh=1m"
      },
      "Resistencia": {
        "EDC": "http://grafana-teco.telecom.com.ar:3000/d/2_8Q89KSsf/topologia-resistencia-edc-5gc?orgId=6&refresh=1m"
      },
      "Rosario": {
        "EDC": "http://grafana-teco.telecom.com.ar:3000/d/2_8Q89KSzdf/topologia-rosario-edc-5gc?orgId=6&refresh=1m"
      },
      "Mu√±ecas": {
        "EDC": "http://grafana-teco.telecom.com.ar:3000/d/2_8Q89KStg/topologia-tucuman-edc-5gc?orgId=6&refresh=1m"
      },
      "Munro": {
        "CDC": "http://10.172.4.22:3000/d/jja8s9Fws/topologia-munro-cdc-5gc?orgId=6&refresh=1m"
      }
    };

    // Datos para la tabla CDC/EDC por Sitio
    const datosSitiosDC = [
      { sitio: "Belgrano", tipoDC: "CDC" },
      // { sitio: "Munro", tipoDC: "CDC (No Productivo)" }, // Descomentar si es necesario y ajustar la l√≥gica de enlaces en generarTablaSitiosDC
      { sitio: "Hornos", tipoDC: "CDC - EDC" },
      { sitio: "San Lorenzo", tipoDC: "CDC - EDC" },
      { sitio: "Golf", tipoDC: "CDC - EDC" },
      { sitio: "Resistencia", tipoDC: "EDC" },
      { sitio: "Rosario", tipoDC: "EDC" },
      { sitio: "Mu√±ecas", tipoDC: "EDC" },
      { sitio: "C√≥rdoba Centro", tipoDC: "EDC" }
    ];

    // Funci√≥n para obtener un link espec√≠fico (CDC o EDC) o todos si no se especifica
    function obtenerLinkEspecifico(sitioCodigo, dcTipo) {
      const sitioNombre = sitios[sitioCodigo];
      if (!sitioNombre) return "<span class='error'>Sitio no encontrado</span>";

      const enlacesDelSitio = grafanaLinks[sitioNombre];
      if (!enlacesDelSitio) return "<span class='error'>Sin topolog√≠a disponible</span>";

      // Si se especifica un tipo de DC ('C' para CDC, 'E' para EDC)
      if (dcTipo) {
        const tipoEnlace = (dcTipo === 'C') ? 'CDC' : 'EDC';
        const linkData = enlacesDelSitio[tipoEnlace];

        if (linkData) {
          if (Array.isArray(linkData)) {
            // Si hay m√∫ltiples enlaces para ese tipo, listarlos todos
            return linkData.map((url, i) => `<a href='${url}' target='_blank'>${tipoEnlace} Link ${i + 1}</a>`).join("<br>");
          } else {
            // Si es un solo enlace para ese tipo
            return `<a href='${linkData}' target='_blank'>${tipoEnlace}</a>`;
          }
        }
      }
      
      // Si no se especific√≥ un tipo de DC o no se encontr√≥ un enlace espec√≠fico,
      // volvemos a la l√≥gica anterior de mostrar todos los enlaces disponibles para ese sitio.
      const resultados = [];
      for (const tipo in enlacesDelSitio) {
        const data = enlacesDelSitio[tipo];
        if (Array.isArray(data)) {
          data.forEach((url, i) => resultados.push(`<a href='${url}' target='_blank'>${tipo} Link ${i + 1}</a>`));
        } else {
          resultados.push(`<a href='${data}' target='_blank'>${tipo}</a>`);
        }
      }
      // Si no se encontr√≥ ning√∫n link, o si no hay enlaces en general
      if (resultados.length === 0) {
          return "<span class='error'>Sin topolog√≠a disponible</span>";
      }
      return resultados.join("<br>");
    }

    function interpretar(codigo) {
      const [parte1, parte2] = codigo.split("-");
      const codPais = parte1?.slice(0, 2);
      const codProvincia = parte1?.slice(2, 4);
      const codSitio = parte1?.slice(4, 7);

      let pais = paises[codPais];
      let provincia = provincias[codProvincia];
      let sitio = sitios[codSitio];

      let dataCenter = "N/A";
      let equipo = "N/A";
      let tipo = "N/A";
      let numero = "-";
      let dcTipoCodigo = ""; // Almacenar√° 'C' o 'E' si aplica

      const isFrontera = parte2?.startsWith("DEF") || parte2?.startsWith("DGM");

      if (isFrontera) {
        equipo = "Router de Frontera";
        tipo = "N/A";
        numero = parte2?.slice(3);

        if (parte2?.startsWith("DEF")) {
          dataCenter = "Router de Frontera (DEF)";
          dcTipoCodigo = ""; // No aplica CDC/EDC directamente a DEF
        } else if (parte2?.startsWith("DGM")) {
          const numDGM = parseInt(numero, 10);
          if (numDGM === 1 || numDGM === 2) {
            dataCenter = "Router de Frontera (DGM - EDC)";
            dcTipoCodigo = "E"; // Indica que es un EDC
          } else if (numDGM === 3 || numDGM === 4) {
            dataCenter = "Router de Frontera (DGM - CDC)";
            dcTipoCodigo = "C"; // Indica que es un CDC
          } else {
            dataCenter = `Router de Frontera (DGM - Desconocido: ${numero})`;
            dcTipoCodigo = "";
          }
        } else {
          dataCenter = `Router de Frontera (ERROR: ${parte2})`;
        }
      } else if (parte2) { // Solo intentar interpretar parte2 si existe y no es de frontera
        const codDC = parte2.slice(0, 1);
        const codEquipo = parte2.slice(1, 2);
        const codTipo = parte2.slice(2, 3);
        numero = parte2.slice(3);

        dataCenter = tipoDC[codDC];
        equipo = equipos[codEquipo];
        tipo = tipoEquipo[codTipo];
        dcTipoCodigo = codDC; // Asignar el c√≥digo DC (C o E)
      } else {
        // Si no hay parte2, dataCenter, equipo, tipo y numero se quedan en sus valores por defecto "N/A", "-"
      }

      // Aqu√≠ es donde llamamos a la funci√≥n obtenerLinkEspecifico
      const link = obtenerLinkEspecifico(codSitio, dcTipoCodigo);

      return {
        codigo,
        pais: pais || `‚ö†Ô∏è ERROR (${codPais})`,
        provincia: provincia || `‚ö†Ô∏è ERROR (${codProvincia})`,
        sitio: sitio || `‚ö†Ô∏è ERROR (${codSitio})`,
        dataCenter: dataCenter || `‚ö†Ô∏è ERROR (${parte2 ? parte2.slice(0, 1) : 'N/A'})`,
        equipo: equipo || `‚ö†Ô∏è ERROR (${parte2 ? parte2.slice(1, 2) : 'N/A'})`,
        tipo: tipo || `‚ö†Ô∏è ERROR (${parte2 ? parte2.slice(2, 3) : 'N/A'})`,
        numero: numero || "-",
        link
      };
    }

    function interpretarMultiples(codigosExternos = null) {
      const input = codigosExternos || document.getElementById("inputCodigos").value;
      const codigos = input.split("\n").flatMap(c => c.split(",")).map(c => c.trim()).filter(c => c);

      // Actualizar la URL con los c√≥digos
      const nuevaURL = `${location.pathname}?q=${encodeURIComponent(codigos.join(","))}`;
      history.replaceState(null, "", nuevaURL);

      const tbody = document.querySelector("#tablaResultados tbody");
      tbody.innerHTML = "";

      codigos.forEach(codigo => {
        const res = interpretar(codigo);
        const fila = document.createElement("tr");
        Object.values(res).forEach(valor => {
          const td = document.createElement("td");
          td.innerHTML = valor.includes("ERROR") ? `<span class='error'>${valor}</span>` : valor;
          fila.appendChild(td);
        });
        tbody.appendChild(fila);
      });
    }

    function generarTablaSitiosDC() {
      const tbody = document.getElementById("tbodySitiosDC");
      if (!tbody) return;

      tbody.innerHTML = "";

      datosSitiosDC.forEach(item => {
        const fila = document.createElement("tr");

        const tdSitio = document.createElement("td");
        tdSitio.textContent = item.sitio;
        fila.appendChild(tdSitio);

        const tdTipoDC = document.createElement("td");
        let linkContent = "";

        const sitioCodigo = Object.keys(sitios).find(key => sitios[key] === item.sitio);

        // Aqu√≠, en la tabla de sitios, tambi√©n podemos usar obtenerLinkEspecifico
        // Si tienes "CDC - EDC", quiz√°s quieras listar ambos o un texto sin link
        // Por ahora, si es "CDC - EDC", mostrar√° ambos links usando la l√≥gica por defecto de obtenerLinkEspecifico
        if (sitioCodigo) {
          if (item.tipoDC.includes("No Productivo")) {
            linkContent = item.tipoDC; // Solo texto si no es productivo
          } else if (item.tipoDC.includes("CDC - EDC")) {
            // Llama a la funci√≥n para obtener AMBOS links (CDC y EDC) si el sitio tiene los dos
            linkContent = obtenerLinkEspecifico(sitioCodigo, 'C') + "<br>" + obtenerLinkEspecifico(sitioCodigo, 'E');
          }
          else if (item.tipoDC.includes("CDC")) {
            linkContent = obtenerLinkEspecifico(sitioCodigo, 'C'); // Solo link CDC
          } else if (item.tipoDC.includes("EDC")) {
            linkContent = obtenerLinkEspecifico(sitioCodigo, 'E'); // Solo link EDC
          } else {
             // Fallback si no encaja en las categor√≠as anteriores, muestra todos los disponibles
             linkContent = obtenerLinkEspecifico(sitioCodigo);
          }
        } else {
          linkContent = `<span class='error'>${item.tipoDC} (Sitio/Link no disponible)</span>`;
        }

        tdTipoDC.innerHTML = linkContent;
        fila.appendChild(tdTipoDC);
        tbody.appendChild(fila);
      });
    }

    // Si hay par√°metros ?q=... en la URL, cargarlos al iniciar
    window.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(window.location.search);
      const query = params.get("q");
      if (query) {
        document.getElementById("inputCodigos").value = query.split(",").join("\n");
        interpretarMultiples(query);
      }

      const btnInterpretar = document.getElementById("btnInterpretar");
      if (btnInterpretar) {
        btnInterpretar.addEventListener("click", () => interpretarMultiples());
      }

      // Llamada a la funci√≥n para generar la tabla "CDC/EDC por Sitio"
      generarTablaSitiosDC();

      // C√≥digo para la funcionalidad de Agregar Sitio (si la quieres activar)
      // const btnAgregarSitio = document.getElementById("btnAgregarSitio");
      // if (btnAgregarSitio) {
      //     btnAgregarSitio.addEventListener("click", agregarNuevoSitio);
      // }
    });
  </script>
</body>
</html>